function wait_for(t){var e=t||15,n=$submit.html();!function t(){e>0?($submit.html('<div style="width:55px;"><i class="loading mr10"></i>'+e+"</div>").attr("disabled",!0),e--,setTimeout(t,1e3)):($submit.html(n).attr("disabled",!1),e=15)}()}$.fn.FixedInput=function(t){var e=$(this);switch(e.attr("on-start")||e.on("click",".fixed-body",(function(){e.FixedInput("hide")})).attr("on-start",!0),t){case"show":return e.addClass("show"),setTimeout(()=>{$(e.find("textarea,input")[0]).focus()},100);case"hide":return e.find("#cancel-comment-reply-link").click(),e.find("input,textarea").blur(),e.find(".dropup").removeClass("open"),e.removeClass("show")}},_thanhdieu.bd.on("click","[fixed-input]",(function(){var t=$(this),e=$(t.attr("fixed-input"));scrollTo("#comments",-50),e.FixedInput("show")})),$comments=$("#comments-title"),$cancel=$("#cancel-comment-reply-link"),$author=$("#comment-user-info"),$submit=$("#commentform #submit"),$com_ajax_url=_thanhdieu.ajax_url,$com_list=$("#postcomments .commentlist"),_thanhdieu.bd.on("click",".commentlist .pagenav a, .comment-orderby",(function(){var t=$(this);if($("#cancel-comment-reply-link").click(),!t.hasClass("pag-jump")){var e=!t.attr("no-replace");return $(".comment-order-box li").removeClass("active"),t.closest("li").addClass("active"),post_ajax($(this),".commentlist",".commentlist",">.comment","",".pagenav","","",e)}t.addClass("ajax-next")})),_thanhdieu.bd.on("click",".comment-edit-link,.comment-reply-link",(function(){var t=$(this),e=t.attr("data-commentid"),n=t.hasClass("comment-edit-link");return addComment.moveForm(t,"user-comment-"+e,e,"respond",t.attr("data-postid"),n),scrollTo($("#user-comment-"+e),-40),!1})),_thanhdieu.bd.on("keydown","#comment",(function(t){t.ctrlKey&&13==t.keyCode&&$submit.click()})),_thanhdieu.bd.on("click",".comment-trash-link",(function(){var t=$(this),e=t.attr("data-commentid"),n={action:"trash_comment",comment_id:e};1==confirm("Are you sure you want to delete this comment?")&&ws_ajax(t,n,(function(t){t.error||$("#comment-"+e).slideUp().delay(1e3,(function(){$(this).remove()}))}),"Processing please wait...")})),_thanhdieu.bd.on("click","#commentform #submit",(function(){var t=$(this),e=t.parents("#commentform").serializeObject();if($author.length&&$author.attr("require_name_email")){if(e.author.length<2||e.email.length<4)return notyf("Please enter your nickname and email address","warning"),$author.addClass("open").find('[name="author"]').focus(),!1;if(!is_mail(e.email))return notyf("Email format error","warning"),$author.addClass("open").find('[name="email"]').focus(),!1}return e.comment.length<4?(notyf("Comment has too little content","warning"),$("#comment").focus(),!1):(e.action="submit_comment",ws_ajax(t,e,(function(t){var n=t.html;if(!t.error&&n){if(e.edit_comment_ID)$cancel.click(),$("#comment-content-"+e.edit_comment_ID).html(n);else{n=n.replace(/class="comment/,'style="display:none;" class="comment ajax-comment');var o=$("#respond"),i=$("#postcomments .commentlist"),a=o.parent().parent(".comment");if(a.length){var m=a.find(">.children");m.length?m.prepend(n):a.append('<ul class="children">'+n+"</ul>")}else if(i.length){var s=$("#postcomments .commentlist>.comment-filter");s.length?s.after(n):i.prepend(n)}else o.after('<div id="postcomments"><ol class="commentlist list-unstyled">'+n+"</ol></div>");if($("[reply-show]").length&&t.comment)if(~~t.comment.comment_approved>0){var c=$($("[reply-show]")[0]).attr("reload-hash");c&&(window.location.hash=c),window.location.reload()}else setTimeout((function(){notyf("After approval, you can view the hidden content","warning")}),200);$cancel.click(),$("#postcomments .ajax-comment").slideDown(200).removeClass("ajax-comment"),$("#postcomments .comment-null").slideUp(200)}auto_fun(),wait_for(t.wait_time),$("#comment").val(""),$('[name="canvas_yz"]').val(""),$(".imagecaptcha").click(),$("#respond").FixedInput("hide")}})),!1)}));var addComment={moveForm:function(t,e,n,o,i,a){var m,s=this,c=s.I(e),r=s.I(o),l=s.I("cancel-comment-reply-link"),d=(s.I("comment_parent"),s.I("comment_post_ID")),u=$("#"+o+" .action-text");if($(".comment-footer").show(),a){var p=$submit.html();u.html("Edit this content"),s.I("comment").value="",$("#comment_parent").attr("name","edit_comment_ID"),$submit.attr("disabled",!0).html('<i class="loading mr6"></i><span>Loading</span>'),$("#comment").attr("disabled",!0).val("Retrieving content, please wait..."),$("#"+e).find(".comment-footer").hide(),ws_ajax(t,{action:"get_comment",comment_id:n},(function(t){t.error&&$cancel.click(),$submit.html(p).attr("disabled",!1),$("#comment").attr("disabled",!1).val(t.comment_content).focus()}),"stop")}u.html(t.attr("data-replyto")),s.respondId=o,i=i||!1,s.I("theme-temp-form-div")||((m=document.createElement("div")).id="theme-temp-form-div",m.style.display="none",r.parentNode.insertBefore(m,r)),c?c.parentNode.insertBefore(r,c.nextSibling):(temp=s.I("theme-temp-form-div"),s.I("comment_parent").value="0",temp.parentNode.insertBefore(r,temp),temp.parentNode.removeChild(temp)),d&&i&&(d.value=i),l.style.display="",l.onclick=function(){var t=addComment,e=t.I("theme-temp-form-div"),n=t.I(t.respondId);return $("#comment_parent").attr("name","comment_parent"),$(".comment-footer").show(),$("#comment").val("").trigger("input"),setTimeout((function(){$("#"+o).removeClass("show")}),10),u.html(""),e&&n&&(e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e)),this.style.display="none",this.onclick=null,!1};try{setTimeout((function(){$("#"+o).FixedInput("show")}),10)}catch(t){}return!1},I:function(t){return document.getElementById(t)}};if($(".respond-mobiles").click((function(t){t.stopPropagation(),$("#respond").toggleClass("show")})),$(document).click((function(t){$(t.target).closest(".respond-mobiles").length||$(t.target).closest("#respond").length||$("#respond").removeClass("show")})),$("#respond").on("click",(function(t){$(t.target).closest("#commentform").length||$(this).hasClass("show")&&$(this).removeClass("show")})),$(".but.btn-input-expand.input-smilie").click((function(){$(".smilie").toggleClass("open")})),$(".but.btn-input-expand.input-image").click((function(){$(".image").toggleClass("open")})),$(".comment-reply-link").click((function(){var t=$(this).data("commentid"),e=$(this).data("usernamereply");$("#respond").find('input[name="reply_cmt"]').val(t),$("#is_reply").val(1),$("#usernamereply").val(e),$("#parent_comment_id").val(t),$("#respond").addClass("show")})),window.location.hash&&(0===window.location.hash.indexOf("comment-content-")||0===window.location.hash.indexOf("user-comment-"))){var target_id="#"+window.location.hash.substr(1);$(target_id).length&&$("html, body").animate({scrollTop:$(target_id).offset().top},1e3)}